# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
 schedule:
    - cron: "*/5 * * * *" # Runs every minute

  # Allows you to run this workflow manually from the Actions tab
 workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
     # The type of runner that the job will run on
     runs-on: ubuntu-latest
    
     steps:
        - name: Install Docker
          run: |
            # Install Docker
            sudo apt-get update
            sudo apt-get install -y apt-transport-https ca-certificates curl software-properties-common
            curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
            echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
            sudo apt-get update
            sudo apt-get install -y docker-ce docker-ce-cli containerd.io
  
        - name: Verify Docker Installation
          run: |
            # Verify Docker installation
            docker --version
            
        - name: Pull Docker Image
          run: |
            # Pull a Docker image (example: nginx)
            docker pull ghcr.io/sonichigo/devpod-keploy:latest
  
        - name: Verify Docker Image Pull
          run: |
            # Verify the pulled Docker image
            docker images
